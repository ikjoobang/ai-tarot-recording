<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš™ï¸ ì„¤ì • - AI íƒ€ë¡œ ìƒë‹´ ë…¹í™” ì‹œìŠ¤í…œ</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <i class="fas fa-moon"></i>
                    AI íƒ€ë¡œ ìƒë‹´ ë…¹í™”
                    <i class="fas fa-star"></i>
                </h1>
                <nav class="nav">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i> í™ˆ
                    </a>
                    <a href="settings.html" class="nav-link active">
                        <i class="fas fa-cog"></i> ì„¤ì •
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="settings-container">
                <!-- Page Header -->
                <div class="page-header">
                    <h1>
                        <i class="fas fa-cog"></i>
                        ì‹œìŠ¤í…œ ì„¤ì •
                    </h1>
                    <p>API í‚¤ì™€ í´ë¼ìš°ë“œ ì €ì¥ì†Œë¥¼ ì„¤ì •í•˜ì„¸ìš”</p>
                </div>

                <!-- Save Success Alert -->
                <div id="saveAlert" class="alert alert-success" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <span>ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
                </div>

                <!-- Gemini API Section -->
                <section class="settings-section card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-robot"></i>
                            Gemini AI ì„¤ì •
                        </h2>
                        <span class="status-badge" id="geminiStatus">ë¯¸ì„¤ì •</span>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="geminiApiKey">
                                <i class="fas fa-key"></i>
                                Gemini API í‚¤
                            </label>
                            <div class="input-group">
                                <input 
                                    type="password" 
                                    id="geminiApiKey" 
                                    class="form-control" 
                                    placeholder="AIza..."
                                >
                                <button class="btn-toggle-password" onclick="togglePassword('geminiApiKey')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <small class="form-text">
                                <a href="https://aistudio.google.com/app/apikey" target="_blank">
                                    <i class="fas fa-external-link-alt"></i>
                                    Google AI Studioì—ì„œ API í‚¤ ë°œê¸‰ë°›ê¸°
                                </a>
                            </small>
                        </div>

                        <div class="form-group">
                            <button class="btn btn-accent" onclick="testGeminiApi()">
                                <i class="fas fa-vial"></i>
                                API ì—°ê²° í…ŒìŠ¤íŠ¸
                            </button>
                            <span id="geminiTestResult"></span>
                        </div>

                        <div class="info-box">
                            <h4><i class="fas fa-info-circle"></i> Gemini API ì •ë³´</h4>
                            <ul>
                                <li>ë¬´ë£Œ í‹°ì–´: ì›” 60 ìš”ì²­/ë¶„, ì¼ 1,500 ìš”ì²­</li>
                                <li>í•œêµ­ì–´ ëŒ€í™” ìƒì„± ì§€ì›</li>
                                <li>íƒ€ë¡œ ìƒë‹´ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ìƒì„±</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Cloud Storage Section -->
                <section class="settings-section card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-cloud"></i>
                            í´ë¼ìš°ë“œ ì €ì¥ì†Œ ì„¤ì •
                        </h2>
                        <span class="status-badge" id="storageStatus">ë¯¸ì„¤ì •</span>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-database"></i>
                                ì €ì¥ì†Œ ì„ íƒ
                            </label>
                            <div class="storage-options">
                                <label class="storage-option">
                                    <input type="radio" name="storageType" value="googledrive">
                                    <div class="storage-card">
                                        <i class="fab fa-google-drive"></i>
                                        <h4>êµ¬ê¸€ ë“œë¼ì´ë¸Œ</h4>
                                        <p>ë¬´ë£Œ 15GB</p>
                                    </div>
                                </label>
                                <label class="storage-option">
                                    <input type="radio" name="storageType" value="aws">
                                    <div class="storage-card">
                                        <i class="fab fa-aws"></i>
                                        <h4>AWS S3</h4>
                                        <p>ì²« 12ê°œì›” 5GB ë¬´ë£Œ</p>
                                    </div>
                                </label>
                                <label class="storage-option">
                                    <input type="radio" name="storageType" value="local" checked>
                                    <div class="storage-card">
                                        <i class="fas fa-hdd"></i>
                                        <h4>ë¡œì»¬ ì €ì¥</h4>
                                        <p>ë‚´ ì»´í“¨í„°ì—ë§Œ ì €ì¥</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Google Drive Settings -->
                        <div id="googledriveSettings" class="storage-settings" style="display: none;">
                            <h3><i class="fab fa-google-drive"></i> êµ¬ê¸€ ë“œë¼ì´ë¸Œ ì„¤ì •</h3>
                            
                            <div class="form-group">
                                <label for="googleClientId">
                                    <i class="fas fa-id-card"></i>
                                    í´ë¼ì´ì–¸íŠ¸ ID
                                </label>
                                <input 
                                    type="text" 
                                    id="googleClientId" 
                                    class="form-control" 
                                    placeholder="123456789-abc.apps.googleusercontent.com"
                                >
                            </div>

                            <div class="form-group">
                                <label for="googleClientSecret">
                                    <i class="fas fa-lock"></i>
                                    í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿
                                </label>
                                <div class="input-group">
                                    <input 
                                        type="password" 
                                        id="googleClientSecret" 
                                        class="form-control" 
                                        placeholder="GOCSPX-..."
                                    >
                                    <button class="btn-toggle-password" onclick="togglePassword('googleClientSecret')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <button class="btn btn-primary" onclick="authenticateGoogleDrive()">
                                    <i class="fab fa-google"></i>
                                    êµ¬ê¸€ ë“œë¼ì´ë¸Œ ì—°ê²°
                                </button>
                                <span id="googleDriveStatus"></span>
                            </div>

                            <div class="info-box">
                                <h4><i class="fas fa-info-circle"></i> ì„¤ì • ë°©ë²•</h4>
                                <ol>
                                    <li><a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a> ì ‘ì†</li>
                                    <li>í”„ë¡œì íŠ¸ ìƒì„± ë° Google Drive API í™œì„±í™”</li>
                                    <li>OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±</li>
                                    <li>ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€: <code id="redirectUri"></code></li>
                                </ol>
                            </div>
                        </div>

                        <!-- AWS S3 Settings -->
                        <div id="awsSettings" class="storage-settings" style="display: none;">
                            <h3><i class="fab fa-aws"></i> AWS S3 ì„¤ì •</h3>
                            
                            <div class="form-group">
                                <label for="awsAccessKey">
                                    <i class="fas fa-key"></i>
                                    Access Key ID
                                </label>
                                <input 
                                    type="text" 
                                    id="awsAccessKey" 
                                    class="form-control" 
                                    placeholder="AKIA..."
                                >
                            </div>

                            <div class="form-group">
                                <label for="awsSecretKey">
                                    <i class="fas fa-lock"></i>
                                    Secret Access Key
                                </label>
                                <div class="input-group">
                                    <input 
                                        type="password" 
                                        id="awsSecretKey" 
                                        class="form-control" 
                                        placeholder="wJalr..."
                                    >
                                    <button class="btn-toggle-password" onclick="togglePassword('awsSecretKey')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="awsRegion">
                                    <i class="fas fa-globe"></i>
                                    ë¦¬ì „
                                </label>
                                <select id="awsRegion" class="form-control">
                                    <option value="ap-northeast-2">ì•„ì‹œì•„ íƒœí‰ì–‘ (ì„œìš¸) - ap-northeast-2</option>
                                    <option value="ap-northeast-1">ì•„ì‹œì•„ íƒœí‰ì–‘ (ë„ì¿„) - ap-northeast-1</option>
                                    <option value="us-east-1">ë¯¸êµ­ ë™ë¶€ (ë²„ì§€ë‹ˆì•„ ë¶ë¶€) - us-east-1</option>
                                    <option value="us-west-2">ë¯¸êµ­ ì„œë¶€ (ì˜¤ë ˆê³¤) - us-west-2</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="awsBucket">
                                    <i class="fas fa-folder"></i>
                                    ë²„í‚· ì´ë¦„
                                </label>
                                <input 
                                    type="text" 
                                    id="awsBucket" 
                                    class="form-control" 
                                    placeholder="my-tarot-recordings"
                                >
                            </div>

                            <div class="form-group">
                                <button class="btn btn-accent" onclick="testAwsConnection()">
                                    <i class="fas fa-vial"></i>
                                    AWS ì—°ê²° í…ŒìŠ¤íŠ¸
                                </button>
                                <span id="awsTestResult"></span>
                            </div>

                            <div class="info-box">
                                <h4><i class="fas fa-info-circle"></i> ì„¤ì • ë°©ë²•</h4>
                                <ol>
                                    <li>AWS ì½˜ì†”ì—ì„œ S3 ë²„í‚· ìƒì„±</li>
                                    <li>IAM ì‚¬ìš©ì ìƒì„± (S3 Full Access ê¶Œí•œ)</li>
                                    <li>Access Key ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</li>
                                    <li>ë²„í‚·ì— CORS ì„¤ì • ì¶”ê°€</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Local Storage Info -->
                        <div id="localSettings" class="storage-settings">
                            <div class="info-box info-box-primary">
                                <h4><i class="fas fa-hdd"></i> ë¡œì»¬ ì €ì¥ ì •ë³´</h4>
                                <ul>
                                    <li>ë…¹í™”ëœ ì˜ìƒì´ ë‚´ ì»´í“¨í„°ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤</li>
                                    <li>ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤</li>
                                    <li>í´ë¼ìš°ë“œ ë°±ì—…ì€ ìˆ˜ë™ìœ¼ë¡œ í•´ì•¼ í•©ë‹ˆë‹¤</li>
                                    <li>API í‚¤ ì—†ì´ë„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TTS Settings Section -->
                <section class="settings-section card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-volume-up"></i>
                            ìŒì„± í•©ì„± ì„¤ì •
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="ttsVoice">
                                <i class="fas fa-microphone"></i>
                                ìŒì„± ì„ íƒ
                            </label>
                            <select id="ttsVoice" class="form-control">
                                <option value="">ê¸°ë³¸ í•œêµ­ì–´ ìŒì„±</option>
                            </select>
                            <small class="form-text">ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ëŠ” ìŒì„± ëª©ë¡</small>
                        </div>

                        <div class="form-group">
                            <label for="ttsSpeed">
                                <i class="fas fa-tachometer-alt"></i>
                                ë§í•˜ê¸° ì†ë„: <span id="ttsSpeedValue">1.0</span>
                            </label>
                            <input 
                                type="range" 
                                id="ttsSpeed" 
                                class="form-range" 
                                min="0.5" 
                                max="2.0" 
                                step="0.1" 
                                value="1.0"
                            >
                        </div>

                        <div class="form-group">
                            <label for="ttsPitch">
                                <i class="fas fa-music"></i>
                                ìŒë†’ì´: <span id="ttsPitchValue">1.0</span>
                            </label>
                            <input 
                                type="range" 
                                id="ttsPitch" 
                                class="form-range" 
                                min="0.5" 
                                max="2.0" 
                                step="0.1" 
                                value="1.0"
                            >
                        </div>

                        <div class="form-group">
                            <button class="btn btn-primary" onclick="testTTS()">
                                <i class="fas fa-play"></i>
                                ìŒì„± í…ŒìŠ¤íŠ¸
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Advanced Settings -->
                <section class="settings-section card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-cogs"></i>
                            ê³ ê¸‰ ì„¤ì •
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoStart" class="form-checkbox">
                                ë…¹í™” ì‹œì‘ ì‹œ AI ëŒ€í™” ìë™ ì‹œì‘
                            </label>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoUpload" class="form-checkbox">
                                ë…¹í™” ì¢…ë£Œ ì‹œ ìë™ ì—…ë¡œë“œ
                            </label>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="showSubtitles" class="form-checkbox">
                                AI ëŒ€í™” ìë§‰ í‘œì‹œ
                            </label>
                        </div>

                        <div class="form-group">
                            <label for="videoQuality">
                                <i class="fas fa-film"></i>
                                ë¹„ë””ì˜¤ í’ˆì§ˆ
                            </label>
                            <select id="videoQuality" class="form-control">
                                <option value="low">ì €í™”ì§ˆ (360p)</option>
                                <option value="medium" selected>ì¤‘í™”ì§ˆ (720p)</option>
                                <option value="high">ê³ í™”ì§ˆ (1080p)</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Action Buttons -->
                <div class="settings-actions">
                    <button class="btn btn-success btn-lg" onclick="saveSettings()">
                        <i class="fas fa-save"></i>
                        ì„¤ì • ì €ì¥
                    </button>
                    <button class="btn btn-danger btn-lg" onclick="resetSettings()">
                        <i class="fas fa-undo"></i>
                        ì´ˆê¸°í™”
                    </button>
                    <a href="index.html" class="btn btn-ghost btn-lg">
                        <i class="fas fa-arrow-left"></i>
                        ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>ğŸ”® AI íƒ€ë¡œ ìƒë‹´ ë…¹í™” ì‹œìŠ¤í…œ v1.0</p>
            <p>Powered by Gemini AI, WebRTC & Web Speech API</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/tts.js"></script>
    <script>
        // Load settings on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            loadVoices();
            setupEventListeners();
            displayRedirectUri();
        });

        // Display current URL as redirect URI
        function displayRedirectUri() {
            const redirectUri = document.getElementById('redirectUri');
            if (redirectUri) {
                redirectUri.textContent = window.location.origin + window.location.pathname;
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Storage type change
            document.querySelectorAll('input[name="storageType"]').forEach(radio => {
                radio.addEventListener('change', handleStorageTypeChange);
            });

            // TTS sliders
            document.getElementById('ttsSpeed').addEventListener('input', (e) => {
                document.getElementById('ttsSpeedValue').textContent = e.target.value;
            });

            document.getElementById('ttsPitch').addEventListener('input', (e) => {
                document.getElementById('ttsPitchValue').textContent = e.target.value;
            });
        }

        // Handle storage type change
        function handleStorageTypeChange(e) {
            // Hide all storage settings
            document.querySelectorAll('.storage-settings').forEach(div => {
                div.style.display = 'none';
            });

            // Show selected storage settings
            const storageType = e.target.value;
            if (storageType === 'googledrive') {
                document.getElementById('googledriveSettings').style.display = 'block';
            } else if (storageType === 'aws') {
                document.getElementById('awsSettings').style.display = 'block';
            } else if (storageType === 'local') {
                document.getElementById('localSettings').style.display = 'block';
            }
        }

        // Load saved settings
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('tarotAppSettings') || '{}');
            
            // Gemini API
            if (settings.geminiApiKey) {
                document.getElementById('geminiApiKey').value = settings.geminiApiKey;
                document.getElementById('geminiStatus').textContent = 'ì„¤ì •ë¨';
                document.getElementById('geminiStatus').className = 'status-badge status-success';
            }

            // Storage type
            if (settings.storageType) {
                document.querySelector(`input[name="storageType"][value="${settings.storageType}"]`).checked = true;
                handleStorageTypeChange({ target: { value: settings.storageType } });
            }

            // Google Drive
            if (settings.googleClientId) document.getElementById('googleClientId').value = settings.googleClientId;
            if (settings.googleClientSecret) document.getElementById('googleClientSecret').value = settings.googleClientSecret;

            // AWS
            if (settings.awsAccessKey) document.getElementById('awsAccessKey').value = settings.awsAccessKey;
            if (settings.awsSecretKey) document.getElementById('awsSecretKey').value = settings.awsSecretKey;
            if (settings.awsRegion) document.getElementById('awsRegion').value = settings.awsRegion;
            if (settings.awsBucket) document.getElementById('awsBucket').value = settings.awsBucket;

            // TTS
            if (settings.ttsVoice) document.getElementById('ttsVoice').value = settings.ttsVoice;
            if (settings.ttsSpeed) {
                document.getElementById('ttsSpeed').value = settings.ttsSpeed;
                document.getElementById('ttsSpeedValue').textContent = settings.ttsSpeed;
            }
            if (settings.ttsPitch) {
                document.getElementById('ttsPitch').value = settings.ttsPitch;
                document.getElementById('ttsPitchValue').textContent = settings.ttsPitch;
            }

            // Advanced
            if (settings.autoStart) document.getElementById('autoStart').checked = settings.autoStart;
            if (settings.autoUpload) document.getElementById('autoUpload').checked = settings.autoUpload;
            if (settings.showSubtitles) document.getElementById('showSubtitles').checked = settings.showSubtitles;
            if (settings.videoQuality) document.getElementById('videoQuality').value = settings.videoQuality;

            // Update storage status
            updateStorageStatus(settings);
        }

        // Update storage status badge
        function updateStorageStatus(settings) {
            const storageStatus = document.getElementById('storageStatus');
            const storageType = settings.storageType || 'local';
            
            if (storageType === 'local') {
                storageStatus.textContent = 'ë¡œì»¬ ì €ì¥';
                storageStatus.className = 'status-badge status-info';
            } else if (storageType === 'googledrive' && settings.googleClientId) {
                storageStatus.textContent = 'êµ¬ê¸€ ë“œë¼ì´ë¸Œ';
                storageStatus.className = 'status-badge status-success';
            } else if (storageType === 'aws' && settings.awsAccessKey) {
                storageStatus.textContent = 'AWS S3';
                storageStatus.className = 'status-badge status-success';
            } else {
                storageStatus.textContent = 'ë¯¸ì„¤ì •';
                storageStatus.className = 'status-badge';
            }
        }

        // Load available voices
        function loadVoices() {
            const voiceSelect = document.getElementById('ttsVoice');
            const voices = speechSynthesis.getVoices();
            
            // Filter Korean voices
            const koreanVoices = voices.filter(voice => voice.lang.startsWith('ko'));
            
            koreanVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });

            // Load on voices changed
            speechSynthesis.onvoiceschanged = () => loadVoices();
        }

        // Save settings
        function saveSettings() {
            const settings = {
                geminiApiKey: document.getElementById('geminiApiKey').value,
                storageType: document.querySelector('input[name="storageType"]:checked').value,
                googleClientId: document.getElementById('googleClientId').value,
                googleClientSecret: document.getElementById('googleClientSecret').value,
                awsAccessKey: document.getElementById('awsAccessKey').value,
                awsSecretKey: document.getElementById('awsSecretKey').value,
                awsRegion: document.getElementById('awsRegion').value,
                awsBucket: document.getElementById('awsBucket').value,
                ttsVoice: document.getElementById('ttsVoice').value,
                ttsSpeed: document.getElementById('ttsSpeed').value,
                ttsPitch: document.getElementById('ttsPitch').value,
                autoStart: document.getElementById('autoStart').checked,
                autoUpload: document.getElementById('autoUpload').checked,
                showSubtitles: document.getElementById('showSubtitles').checked,
                videoQuality: document.getElementById('videoQuality').value
            };

            localStorage.setItem('tarotAppSettings', JSON.stringify(settings));
            
            // Show success alert
            const alert = document.getElementById('saveAlert');
            alert.style.display = 'flex';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);

            // Update status badges
            updateStorageStatus(settings);
            if (settings.geminiApiKey) {
                document.getElementById('geminiStatus').textContent = 'ì„¤ì •ë¨';
                document.getElementById('geminiStatus').className = 'status-badge status-success';
            }
        }

        // Reset settings
        function resetSettings() {
            if (confirm('ëª¨ë“  ì„¤ì •ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('tarotAppSettings');
                location.reload();
            }
        }

        // Toggle password visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        // Test Gemini API
        async function testGeminiApi() {
            const apiKey = document.getElementById('geminiApiKey').value;
            const resultSpan = document.getElementById('geminiTestResult');
            
            if (!apiKey) {
                resultSpan.innerHTML = '<span class="text-error">API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”</span>';
                return;
            }

            resultSpan.innerHTML = '<span class="text-info">í…ŒìŠ¤íŠ¸ ì¤‘...</span>';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: "Hello"
                            }]
                        }]
                    })
                });

                if (response.ok) {
                    resultSpan.innerHTML = '<span class="text-success"><i class="fas fa-check-circle"></i> ì—°ê²° ì„±ê³µ!</span>';
                } else {
                    resultSpan.innerHTML = '<span class="text-error"><i class="fas fa-times-circle"></i> ì—°ê²° ì‹¤íŒ¨</span>';
                }
            } catch (error) {
                resultSpan.innerHTML = '<span class="text-error"><i class="fas fa-times-circle"></i> ì˜¤ë¥˜ ë°œìƒ</span>';
            }
        }

        // Test TTS
        function testTTS() {
            const voice = document.getElementById('ttsVoice').value;
            const speed = parseFloat(document.getElementById('ttsSpeed').value);
            const pitch = parseFloat(document.getElementById('ttsPitch').value);
            
            const utterance = new SpeechSynthesisUtterance('ì•ˆë…•í•˜ì„¸ìš”, íƒ€ë¡œ ìƒë‹´ì„ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.');
            utterance.lang = 'ko-KR';
            utterance.rate = speed;
            utterance.pitch = pitch;
            
            if (voice) {
                const voices = speechSynthesis.getVoices();
                const selectedVoice = voices.find(v => v.name === voice);
                if (selectedVoice) utterance.voice = selectedVoice;
            }
            
            speechSynthesis.speak(utterance);
        }

        // Authenticate Google Drive
        function authenticateGoogleDrive() {
            alert('êµ¬ê¸€ ë“œë¼ì´ë¸Œ OAuth ì¸ì¦ì€ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.\ní˜„ì¬ëŠ” ë¡œì»¬ ì €ì¥ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
        }

        // Test AWS Connection
        async function testAwsConnection() {
            alert('AWS S3 ì—°ê²° í…ŒìŠ¤íŠ¸ëŠ” êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.\ní˜„ì¬ëŠ” ë¡œì»¬ ì €ì¥ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
        }
    </script>
</body>
</html>
